<app-stepper></app-stepper>

<!-- Preloader -->
<div class="mat-spinner-container" *ngIf="!data">
  <div class="spinner-inner">
    <mat-spinner></mat-spinner>
  </div>
</div>

<div class="container" id="step-05" *ngIf="data">
  <div class="row">
    <div class="form-container">
      <h3 class="text-center">
        Safety Video<span class="safety-responsive"></span> (3 minutes)
      </h3>
      <p>
        Your safety and well-being are very important to The Ride. Viewing of
        this video is required for all Riders and Crew in order to continue with
        Online Check-In. Once the video has played to the end and you have
        digitally signed the waiver, you can move on to the next step.
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <div class="video-container">
        <video (seeking)="seekingVideo($event)" oncontextmenu="return false;" (ended)="vidEnded()" (click)="playVideo()"
          #videoPlayer poster="assets/images/vid3_poster.png">
          <source src="{{ data.safetyVidURL }}" type="video/mp4" />
          <source src="{{ data.safetyVidWebmURL }}" type="video/webm" />
          Your browser does not support this video.
        </video>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <div class="vid-btn-container">
        <button mat-raised-button color="accent" class="prev-btn button-font" (click)="pauseVideo()">
          Pause
        </button>
        <button mat-raised-button color="primary" class="next-btn button-font" (click)="playVideo()">
          Play
        </button>
      </div>
    </div>
  </div>
  <br />
  <div class="row" *ngIf="videoWatched === true">
    <div class="form-container">
      <div class="col-12">
        <p>
          <strong>
            Thanks for watching The Ride Safety Video. Please enter your first
            and last name below to confirm you have read the Safety Waiver.
          </strong>
        </p>
        <p>
          Please note, you won’t be able to proceed to the next step until you
          read the waiver and enter your name at the bottom.
        </p>
      </div>
    </div>
  </div>
  <div class="row" *ngIf="videoWatched === true">
    <div class="col-12">
      <div class="waiver-container">
        <mat-form-field>
          <p>
            <strong>PARTICIPANT AGREEMENT. WAIVER & RELEASE OF LIABILITY</strong>
          </p>
          <textarea matInput matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="15" disabled>
            I wish to participate in the Enbridge® Ride to Conquer Cancer® benefiting Princess Margaret Cancer Centre, scheduled to take place on August 29th, 2020, as well as sanctioned pre- and post-event activities (including, without limitation, training rides) (the "Event"). I agree to abide by all rules, regulations and event instructions of the Event, as well as all applicable municipal and provincial laws and regulations.

            I understand that participating in such an event, using public streets and public and private facilities, and the use of and participation in services made available to participants during the Event is a potentially hazardous activity and can result in serious personal injury or death. I am aware of and expressly assume all risks associated with participating in this Event, including, without limitation, falls, contact with other persons, objects, bicycles and vehicles, the effects of weather, traffic, and the conditions of the streets, and I assert that my participation in the Event is voluntary.

            In consideration for being permitted to participate in the Event, I, for myself and for anyone entitled to act on my behalf, hereby waive and release, from any and all claims for injuries and damages I may have arising out of the Event or my participation in the Event, the Enbridge Ride to Conquer Cancer, CauseForce, LLC, CauseForce Canada, Inc., The Princess Margaret Cancer Foundation and Princess Margaret Cancer Centre, Enbridge Inc., the University Health Network, the City of Toronto, the Province of Ontario, Canada, any beneficiaries, sponsors, officials, participating clubs, communities, organizations, friends of the Event, Riders, Crew Members, consultants, participants, third-party vendors, government or public entities, the owners and operators of any venue(s) I may access, utilize or engage with in connection with my participation in the Event, and each of their respective affiliates, successors, officers, directors, employees, volunteers, agents, and representatives, including, without limitation, any Event medical sponsor, medical director, and members of any Event medical team (the "Releasees").

            I intend by this Waiver and Release to release, in advance, and to waive my rights and to discharge all of the Releasees, from all claims for damages for death, personal injury or property damage that I may have, or which may hereafter accrue to me, as a result of my participation in the Event, even though that liability may arise from active or passive negligence (whether simple or gross), carelessness, or recklessness on the part of the persons or entities being released, from dangerous or defective streets, facilities, property or equipment owned, maintained, controlled or used by them or because of their possible liability without fault. I further agree to indemnify the Releasees from all claims for damages for death, personal injury or property damage made by any third party, caused by or arising out of, in whole or in part, my actions.

            I understand and agree that this Waiver and Release is binding on my heirs, assigns, and legal representatives.

            I attest that I am physically capable of, and have sufficiently trained for, completing each respective element of the Event. If I am aware of or under treatment for any physical infirmity, disorder, ailment, or illness, my medical care provider has been apprised of, and has approved of, my participation in the Event. I acknowledge that I, and I alone, am solely responsible for my personal health and safety, and the personal property I bring with me. I consent to receive medical treatment which may be advisable in the event of illness or injuries suffered by me during the Event, and I agree to pay for the costs of any such medical treatment.

            I agree that my participation in the Event is subject to the sole discretion of the organizers of the Event, and that my participation may be limited or terminated, with or without cause.

            I represent and warrant that I will be at least 18 years old at the time of the Event. If I am under the age of 18, I understand I MUST have a guardian accompany me on the Event as a fellow, registered participant and co-sign this waiver.

            I understand that the Event may be delayed, postponed or canceled due to unforeseen circumstances or occurrences not under the control of the Event organizers, including without limitation, acts of God, fires, floods, explosions, riots, wars, sabotage, terrorism, vandalism, accidents, epidemics, pandemics, governmental acts, injunctions, strikes and other like events that are beyond the anticipation and control of the organizers.

            I understand that all donations processed by the Enbridge Ride to Conquer Cancer donation office are non-refundable and non-transferable, even if I do not participate in the Event.

            I give permission to the Enbridge Ride to Conquer Cancer, CauseForce, LLC, CauseForce Canada, Inc., The Princess Margaret Cancer Foundation, Princess Margaret Cancer Centre, and the University Health Network, and each of their respective affiliates, subsidiaries and agents, for the free use of my name, photograph, voice, or likeness, in any broadcast, telecast, advertising promotion, or other account of the Event or marketing or promotion for future or similar events, and waive any rights of privacy I may have in that regard, and I understand and consent that I will periodically be receiving communications related to my participation in the Event.

            I grant the Event organizers a non-exclusive, worldwide, perpetual, irrevocable, royalty-free, transferable, sublicensable right and license to use, reproduce, adapt, modify, distribute, translate, publish, create derivative works based on, perform, display and otherwise exploit any content, in whole or in part, I provide or make available to any website, social media account or page or services operated by the Event organizers ("Services"). I represent and warrant that I have all authority necessary to grant such license and that my content (i) does not infringe, violate, misappropriate or otherwise conflict with the rights of any third party, and (ii) complies with all applicable laws and regulations. I understand that I am solely liable for all content I provide or otherwise make available to or through the Services and I agree not to use the Services to (i) upload, post, email, transmit or otherwise make available any content that (a) is unlawful, harmful, threatening, abusive, harassing, tortuous, defamatory, vulgar, obscene, libelous, invasive of another's privacy, hateful, or racially, ethnically or otherwise objectionable; (b) is harmful to minors in any way; (c) facilitates gambling, gaming, lotteries, raffles, contests, sweepstakes and/or any other activity featuring the award of a prize; (d) impersonates any person or entity, or falsely states or otherwise misrepresents my affiliation with any person or entity; (e) I do not have a right to make available or that infringes upon any person or entity's patent, trademark, trade secret, copyright or other intellectual property or proprietary rights; or (f) contains software viruses or any other computer code, files or programs designed to interrupt, destroy or limit the functionality of any computer software or hardware or telecommunications equipment; (ii) interfere with or disrupt the Services or servers or networks connected to the Services, or disobey any requirements, procedures, policies or regulations of networks connected to the Services; or (iii) intentionally or unintentionally violate any applicable law or regulation.

            THIS WAIVER AND RELEASE SHALL BE INTERPRETED AND THE RIGHTS OF THE PARTIES DETERMINED UNDER THE LAWS OF THE PROVINCE OF ONTARIO. THE ONTARIO COURTS SHALL HAVE EXCLUSIVE JURISDICTION FOR ANY DISPUTE ARISING UNDER, OR PERTAINING TO, THIS WAIVER AND RELEASE.

            I have carefully read this Waiver and Release and fully understand its contents. I am aware that this is a release of liability and a binding contract between myself and the persons and entities mentioned above, and I sign it of my own free will. I understand that I am giving up substantial rights, including my right to sue. I acknowledge that I am signing this Waiver and Release freely and voluntarily, and intend by my signature for this to be a complete and unconditional release of all liability to the greatest extent allowed by law.
            </textarea>
        </mat-form-field>
      </div>
    </div>
  </div>
  <div class="row" *ngIf="videoWatched === true">
    <form class="form-container" [formGroup]="waiverForm">
      <br />
      <div>
        <p>First and Last Name * </p>
      </div>
      <div class="form-group chex">
        <mat-checkbox color="primary" [(ngModel)]="ageResponse" (change)="checkRes()" formControlName="ageResponse">
          <div class="check-box-text">
            I am at least 18 years of age and have carefully read this document, including the Waiver and Release, and I
            fully understand its contents and voluntarily agree.
          </div>
        </mat-checkbox>

        <div class="row">
          <div class="col-md-2 cat">
            <p>
              *First Name:
            </p>
          </div>
          <div class="form-group col-md-2">
            <mat-form-field class="mat-input">
              <input matInput value="{{ firstName }}" [(ngModel)]="firstName" formControlName="fName" />
              <button mat-button *ngIf="firstName" matSuffix mat-icon-button aria-label="Clear"
                (click)="firstName = ''">
                <!-- <mat-icon>close</mat-icon> -->
              </button>
            </mat-form-field>
            <mat-error class="sub" *ngIf="errorA">
              First Name is required
            </mat-error>
          </div>

          <div class="col-md-2 cat">
            <p>
              *Last Name:
            </p>
          </div>
          <div class="form-group col-md-2">
            <mat-form-field class="mat-input">
              <input matInput value="{{ lastName }}" [(ngModel)]="lastName" formControlName="lName" />
              <button mat-button *ngIf="lastName" matSuffix mat-icon-button aria-label="Clear" (click)="lastName = ''">
                <!-- <mat-icon>close</mat-icon> -->
              </button>
            </mat-form-field>
            <mat-error class="sub" *ngIf="errorB">
              Last Name is required
            </mat-error>
          </div>
        </div>

        <mat-error *ngIf="overAgeError">
          One of these is required to move on
        </mat-error>

        <mat-checkbox color="primary" [(ngModel)]="underAge" (change)="checkResB()" formControlName="underAge">
          <div class="check-box-text">
            I am under the age of 18, I have carefully read this document with my parent or guardian, fully understand
            its contents and participate with their consent.
          </div>
        </mat-checkbox>

        <div class="row">
          <div class="col-md-2 cat">
            <p>
              *First Name:
            </p>
          </div>
          <div class="form-group col-md-2">
            <mat-form-field class="mat-input">
              <input matInput value="{{ ufirstName }}" [(ngModel)]="ufirstName" formControlName="ufName" />
              <button mat-button *ngIf="ufirstName" matSuffix mat-icon-button aria-label="Clear"
                (click)="ufirstName = ''">
                <!-- <mat-icon>close</mat-icon> -->
              </button>
            </mat-form-field>
            <mat-error class="sub" *ngIf="errorC">
              First Name is required
            </mat-error>
          </div>

          <div class="col-md-2 cat">
            <p>
              *Last Name:
            </p>
          </div>
          <div class="form-group col-md-2">
            <mat-form-field class="mat-input">
              <input matInput value="{{ ulastName }}" [(ngModel)]="ulastName" formControlName="ulName" />
              <button mat-button *ngIf="ulastName" matSuffix mat-icon-button aria-label="Clear"
                (click)="ulastName = ''">
                <!-- <mat-icon>close</mat-icon> -->
              </button>
            </mat-form-field>
            <mat-error class="sub" *ngIf="errorD">
              Last Name is required
            </mat-error>
          </div>
        </div>

        <mat-error *ngIf="underAgeError">
          One of these is required to move on
        </mat-error>

        <div>
          <p>Parent / Guardian</p>
        </div>
        <div class="form-group">
          <mat-checkbox color="primary" [(ngModel)]="guardianRes" (change)="checkResB()" formControlName="guardianRes">
            <div class="check-box-text">
              I have carefully read this document, including the Waiver and Release, and I fully understand its contents
              and give my consent for the above rider.
            </div>
          </mat-checkbox>
          <div class="row">
            <div class="col-md-2 cat">
              <p>
                *First Name:
              </p>
            </div>
            <div class="form-group col-md-2">
              <mat-form-field class="mat-input">
                <input matInput value="{{ gfirstName }}" [(ngModel)]="gfirstName" formControlName="gfName" />
                <button mat-button *ngIf="gfirstName" matSuffix mat-icon-button aria-label="Clear"
                  (click)="gfirstName = ''">
                  <mat-icon>close</mat-icon>
                </button>
              </mat-form-field>
              <mat-error class="sub" *ngIf="errorE">
                First Name is required
              </mat-error>
            </div>

            <div class="col-md-2 cat">
              <p>
                *Last Name:
              </p>
            </div>
            <div class="form-group col-md-2">
              <mat-form-field class="mat-input">
                <input matInput value="{{ glastName }}" [(ngModel)]="glastName" formControlName="glName" />
                <button mat-button *ngIf="glastName" matSuffix mat-icon-button aria-label="Clear"
                  (click)="glastName = ''">
                  <mat-icon>close</mat-icon>
                </button>
              </mat-form-field>
              <mat-error class="sub" *ngIf="errorF">
                Last Name is required
              </mat-error>
            </div>
          </div>
          <mat-error *ngIf="guardianError">
            Parent / Guardian is required
          </mat-error>
        </div>

        <!-- <div class="form-group">
          <mat-form-field class="mat-input">
            <input matInput placeholder="Parent/ Guardian Name:" value="{{ guardianNameRes }}" [(ngModel)]="guardianNameRes"
              formControlName="guardianName" />
            <button mat-button *ngIf="guardianNameRes" matSuffix mat-icon-button aria-label="Clear"
              (click)="guardianNameRes = ''">
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>
        
        <mat-error *ngIf="guardianNameResError">
          Guardian or Parent must be entered in order to continue.
        </mat-error></div> -->

        <mat-error *ngIf="waiverForm.hasError('required')">
          Checkbox must be selected in order to continue.
        </mat-error>
      </div>
    </form>
  </div>

  <div class="form-container">
    <div class="border-btm"></div>
  </div>

  <div class="row bottom-nav-row" *ngIf="surveyResults">
    <div class="form-container">
      <div class="btn-container">
        <button mat-raised-button color="accent" class="prev-btn" (click)="previousFlowStep()">
          Back
        </button>
        <button mat-raised-button color="primary" class="next-btn" (click)="validating()">
          Next
        </button>
      </div>
      <div class="save-col">
        <a (click)="updateSurveyResSave()" class="save-later float-right text-uppercase">Save For Later</a>
      </div>
    </div>
  </div>
</div>